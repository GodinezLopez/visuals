local a=game:GetService("Players")local b=a.LocalPlayer;local c=game:GetService("RunService")local d=game:GetService("Workspace")local e=game:GetService("Lighting")local f={ShowSilhouettes=false,ShowDistance=false,ShowLines=false,Fullbright=false,Xray=false,ShowFriends=false}local g={Highlights={},Distances={},Lines={},Friends={},PlayerAddedConnection=nil,CharacterAddedConnections={},RenderSteppedConnections={},OriginalLightingSettings={Brightness=e.Brightness,ClockTime=e.ClockTime,FogEnd=e.FogEnd,GlobalShadows=e.GlobalShadows,OutdoorAmbient=e.OutdoorAmbient}}local function h(i)if i.Team then local j=i.TeamColor.Color;local k=(j.R+j.G+j.B)/3;if k<0.3 then return Color3.new(j.R+0.3,j.G+0.3,j.B+0.3)elseif k>0.7 then return Color3.new(j.R-0.3,j.G-0.3,j.B-0.3)end;return j end;return Color3.new(1,0,0)end;local function l(m)if m and m.Parent then m:Destroy()return true end;return false end;local function n()for o,i in pairs(a:GetPlayers())do if g.Highlights[i]then l(g.Highlights[i])g.Highlights[i]=nil end end;g.Highlights={}end;local function p()for o,i in pairs(a:GetPlayers())do if g.Distances[i]then if g.Distances[i].Billboard then l(g.Distances[i].Billboard)end;g.Distances[i]=nil end end;g.Distances={}end;local function q()for o,i in pairs(a:GetPlayers())do if g.Lines[i]then l(g.Lines[i].Attachment0)l(g.Lines[i].Attachment1)l(g.Lines[i].Beam)g.Lines[i]=nil end end;g.Lines={}end;local function r()for o,i in pairs(a:GetPlayers())do if g.Friends[i]then l(g.Friends[i].NameLabel)g.Friends[i]=nil end end;g.Friends={}end;local function s()for o,t in pairs(g.RenderSteppedConnections)do if t then t:Disconnect()end end;g.RenderSteppedConnections={}for o,t in pairs(g.CharacterAddedConnections)do if t then t:Disconnect()end end;g.CharacterAddedConnections={}if g.PlayerAddedConnection then g.PlayerAddedConnection:Disconnect()g.PlayerAddedConnection=nil end end;local function u()n()p()q()r()s()if f.Fullbright then for v,w in pairs(g.OriginalLightingSettings)do e[v]=w end;f.Fullbright=false end;if f.Xray then for o,x in pairs(d:GetDescendants())do if x:IsA("BasePart")then x.LocalTransparencyModifier=0 end end;f.Xray=false end end;local function y(i)if i==b then return end;local function z(A)if g.Highlights[i]then l(g.Highlights[i])end;if A then local B=Instance.new("Highlight")B.FillColor=h(i)B.FillTransparency=0.5;B.OutlineColor=h(i)B.OutlineTransparency=0;B.Parent=A;g.Highlights[i]=B;A.Humanoid.Died:Connect(function()if f.ShowSilhouettes then wait(0.1)z(i.Character)end end)end end;z(i.Character)if not g.CharacterAddedConnections[i]then g.CharacterAddedConnections[i]=i.CharacterAdded:Connect(function(A)if f.ShowSilhouettes then z(A)end end)end end;local function C(i)if i==b then return end;local function D(A)if g.Distances[i]then l(g.Distances[i].Billboard)end;if A then local E=Instance.new("BillboardGui")E.Size=UDim2.new(0,200,0,50)E.StudsOffset=Vector3.new(0,2,0)E.AlwaysOnTop=true;local F=Instance.new("TextLabel")F.Size=UDim2.new(1,0,1,0)F.BackgroundTransparency=1;F.TextColor3=h(i)F.TextStrokeTransparency=0;F.TextSize=14;F.Font=Enum.Font.GothamBold;F.Parent=E;if A:FindFirstChild("Head")then E.Parent=A.Head;g.Distances[i]={Billboard=E,Label=F}end;A.Humanoid.Died:Connect(function()if f.ShowDistance then wait(0.1)D(i.Character)end end)end end;D(i.Character)if not g.CharacterAddedConnections[i]then g.CharacterAddedConnections[i]=i.CharacterAdded:Connect(function(A)if f.ShowDistance then D(A)end end)end end;local function G(i)if i==b then return end;local function H(A)if g.Lines[i]then l(g.Lines[i].Attachment0)l(g.Lines[i].Attachment1)l(g.Lines[i].Beam)end;if A and A:FindFirstChild("HumanoidRootPart")and b.Character and b.Character:FindFirstChild("HumanoidRootPart")then local I=Instance.new("Attachment")local J=Instance.new("Attachment")local K=Instance.new("Beam")I.Parent=b.Character.HumanoidRootPart;J.Parent=A.HumanoidRootPart;K.Attachment0=I;K.Attachment1=J;K.Width0=0.2;K.Width1=0.2;K.FaceCamera=true;K.Color=ColorSequence.new(h(i))K.Parent=d.Terrain;g.Lines[i]={Attachment0=I,Attachment1=J,Beam=K}A.Humanoid.Died:Connect(function()if f.ShowLines then wait(0.1)H(i.Character)end end)end end;H(i.Character)if not g.CharacterAddedConnections[i]then g.CharacterAddedConnections[i]=i.CharacterAdded:Connect(function(A)if f.ShowLines then H(A)end end)end end;local function L(i)if i==b then return end;if not i:IsFriendsWith(b.UserId)then return end;local function M(A)if g.Friends[i]then l(g.Friends[i].NameLabel)end;if A then local N=Instance.new("BillboardGui")N.Size=UDim2.new(0,200,0,50)N.StudsOffset=Vector3.new(0,4,0)N.AlwaysOnTop=true;local O=Instance.new("TextLabel")O.Size=UDim2.new(1,0,1,0)O.BackgroundTransparency=1;O.Text=i.Name;O.TextSize=16;O.Font=Enum.Font.Highway;O.Parent=N;c.RenderStepped:Connect(function()if f.ShowFriends then local P=(tick()%5)/5;O.TextColor3=Color3.fromHSV(P,1,1)end end)if A:FindFirstChild("Head")then N.Parent=A.Head;g.Friends[i]={NameLabel=N}end;A.Humanoid.Died:Connect(function()if f.ShowFriends then wait(0.1)M(i.Character)end end)end end;M(i.Character)if not g.CharacterAddedConnections[i]then g.CharacterAddedConnections[i]=i.CharacterAdded:Connect(function(A)if f.ShowFriends then M(A)end end)end end;local function Q()if not b.Character or not b.Character:FindFirstChild("HumanoidRootPart")then return end;for i,R in pairs(g.Distances)do if i.Character and i.Character:FindFirstChild("HumanoidRootPart")then local S=(i.Character.HumanoidRootPart.Position-b.Character.HumanoidRootPart.Position).Magnitude;R.Label.Text=math.floor(S)end end end;local function T()f.Fullbright=not f.Fullbright;if f.Fullbright then g.RenderSteppedConnections.Fullbright=c.RenderStepped:Connect(function()e.Brightness=2;e.ClockTime=14;e.FogEnd=100000;e.GlobalShadows=false;e.OutdoorAmbient=Color3.fromRGB(128,128,128)end)else if g.RenderSteppedConnections.Fullbright then g.RenderSteppedConnections.Fullbright:Disconnect()g.RenderSteppedConnections.Fullbright=nil end;for v,w in pairs(g.OriginalLightingSettings)do e[v]=w end end end;local function U()f.Xray=not f.Xray;for o,x in pairs(d:GetDescendants())do if x:IsA("BasePart")and not x:IsDescendantOf(b.Character)then x.LocalTransparencyModifier=f.Xray and 0.8 or 0 end end end;local function V()f.ShowSilhouettes=not f.ShowSilhouettes;if f.ShowSilhouettes then for o,i in pairs(a:GetPlayers())do if i~=b then y(i)end end else n()end end;local function W()f.ShowDistance=not f.ShowDistance;if f.ShowDistance then for o,i in pairs(a:GetPlayers())do if i~=b then C(i)end end;g.RenderSteppedConnections.Distance=c.RenderStepped:Connect(Q)else p()if g.RenderSteppedConnections.Distance then g.RenderSteppedConnections.Distance:Disconnect()g.RenderSteppedConnections.Distance=nil end end end;local function X()f.ShowLines=not f.ShowLines;if f.ShowLines then for o,i in pairs(a:GetPlayers())do if i~=b then G(i)end end else q()end end;local function Y()f.ShowFriends=not f.ShowFriends;if f.ShowFriends then for o,i in pairs(a:GetPlayers())do if i~=b then L(i)end end else r()end end;local Z=Instance.new("ScreenGui")Z.Name="ESP_GUI"Z.ResetOnSpawn=false;Z.Parent=game:GetService("CoreGui")local _=Instance.new("ImageButton")_.Size=UDim2.new(0,50,0,50)_.Position=UDim2.new(0,20,0,20)_.BackgroundColor3=Color3.fromRGB(40,40,40)_.Image="rbxassetid://6031068430"_.BackgroundTransparency=0.1;_.Parent=Z;local a0=Instance.new("UICorner")a0.CornerRadius=UDim.new(1,0)a0.Parent=_;local a1=Instance.new("Frame")a1.Size=UDim2.new(0,350,0,500)a1.Position=UDim2.new(0.5,-175,0.5,-250)a1.BackgroundColor3=Color3.fromRGB(25,25,25)a1.BorderSizePixel=0;a1.Visible=false;a1.Parent=Z;local a2=Instance.new("UICorner")a2.CornerRadius=UDim.new(0,10)a2.Parent=a1;local a3=Instance.new("Frame")a3.Size=UDim2.new(1,0,0,40)a3.BackgroundColor3=Color3.fromRGB(30,30,30)a3.BorderSizePixel=0;a3.Parent=a1;local a4=Instance.new("TextLabel")a4.Size=UDim2.new(1,-40,1,0)a4.Position=UDim2.new(0,10,0,0)a4.BackgroundTransparency=1;a4.Text="ESP Menu"a4.TextColor3=Color3.new(1,1,1)a4.TextSize=18;a4.Font=Enum.Font.GothamBold;a4.TextXAlignment=Enum.TextXAlignment.Left;a4.Parent=a3;local a5=Instance.new("TextButton")a5.Size=UDim2.new(0,30,0,30)a5.Position=UDim2.new(1,-35,0.5,-15)a5.BackgroundColor3=Color3.fromRGB(255,50,50)a5.Text="X"a5.TextColor3=Color3.new(1,1,1)a5.TextSize=14;a5.Font=Enum.Font.GothamBold;a5.Parent=a3;local a6=Instance.new("UICorner")a6.CornerRadius=UDim.new(0,6)a6.Parent=a5;local a7=Instance.new("Frame")a7.Size=UDim2.new(1,-20,1,-50)a7.Position=UDim2.new(0,10,0,45)a7.BackgroundTransparency=1;a7.Parent=a1;local function a8(a9,aa,ab)local ac=Instance.new("TextButton")ac.Size=UDim2.new(0.45,0,1,0)ac.Position=aa;ac.BackgroundColor3=ab;ac.Text=a9;ac.TextColor3=Color3.new(1,1,1)ac.TextSize=16;ac.Font=Enum.Font.GothamBold;local ad=Instance.new("UICorner")ad.CornerRadius=UDim.new(0,8)ad.Parent=ac;return ac end;local function ae(a9,aa,af,ag)local ac=Instance.new("TextButton")ac.Size=UDim2.new(1,0,0,45)ac.Position=UDim2.new(0,0,0,aa)ac.BackgroundColor3=Color3.fromRGB(60,60,60)ac.Text=a9;ac.TextColor3=Color3.new(1,1,1)ac.TextSize=16;ac.Font=Enum.Font.GothamSemibold;ac.Parent=a7;local ad=Instance.new("UICorner")ad.CornerRadius=UDim.new(0,8)ad.Parent=ac;ac.MouseButton1Click:Connect(function()if ag then ag()end;ac.BackgroundColor3=f[af]and Color3.fromRGB(0,170,0)or Color3.fromRGB(60,60,60)end)return ac end;local ah={{name="Ver Siluetas",key="ShowSilhouettes",func=V},{name="Ver Distancia",key="ShowDistance",func=W},{name="Ver Líneas",key="ShowLines",func=X},{name="Fullbright",key="Fullbright",func=T},{name="Xray",key="Xray",func=U},{name="Ver Amigos",key="ShowFriends",func=Y}}for ai,aj in ipairs(ah)do ae(aj.name,(ai-1)*50,aj.key,aj.func)end;local ak=ae("Salir",(#ah)*50)ak.BackgroundColor3=Color3.fromRGB(255,50,50)local al=Instance.new("Frame")al.Size=UDim2.new(0,300,0,150)al.Position=UDim2.new(0.5,-150,0.5,-75)al.BackgroundColor3=Color3.fromRGB(30,30,30)al.BorderSizePixel=0;al.Visible=false;al.Parent=Z;local am=Instance.new("UICorner")am.CornerRadius=UDim.new(0,10)am.Parent=al;local an=Instance.new("TextLabel")an.Size=UDim2.new(1,0,0.5,0)an.Position=UDim2.new(0,0,0,20)an.BackgroundTransparency=1;an.Text="¿Deseas salir del script?"an.TextColor3=Color3.new(1,1,1)an.TextSize=18;an.Font=Enum.Font.GothamBold;an.Parent=al;local ao=Instance.new("Frame")ao.Size=UDim2.new(1,-40,0,40)ao.Position=UDim2.new(0,20,1,-60)ao.BackgroundTransparency=1;ao.Parent=al;local ap=a8("Aceptar",UDim2.new(0,0,0,0),Color3.fromRGB(0,170,0))ap.Parent=ao;local aq=a8("Cancelar",UDim2.new(0.55,0,0,0),Color3.fromRGB(255,50,50))aq.Parent=ao;ap.MouseButton1Click:Connect(function()u()Z:Destroy()end)aq.MouseButton1Click:Connect(function()al.Visible=false end)ak.MouseButton1Click:Connect(function()al.Visible=true end)_.MouseButton1Click:Connect(function()a1.Visible=not a1.Visible end)a5.MouseButton1Click:Connect(function()a1.Visible=false end)local function ar(i)if i==b then return end;if f.ShowSilhouettes then y(i)end;if f.ShowDistance then C(i)end;if f.ShowLines then G(i)end;if f.ShowFriends then L(i)end end;g.PlayerAddedConnection=a.PlayerAdded:Connect(ar)a.PlayerRemoving:Connect(function(i)if g.Highlights[i]then l(g.Highlights[i])g.Highlights[i]=nil end;if g.Distances[i]then l(g.Distances[i].Billboard)g.Distances[i]=nil end;if g.Lines[i]then l(g.Lines[i].Attachment0)l(g.Lines[i].Attachment1)l(g.Lines[i].Beam)g.Lines[i]=nil end;if g.Friends[i]then l(g.Friends[i].NameLabel)g.Friends[i]=nil end;if g.CharacterAddedConnections[i]then g.CharacterAddedConnections[i]:Disconnect()g.CharacterAddedConnections[i]=nil end end)for o,i in pairs(a:GetPlayers())do ar(i)end;local as=game:GetService("UserInputService")local at;local au;local av;local function aw(ax)local ay=ax.Position-au;_.Position=UDim2.new(av.X.Scale,av.X.Offset+ay.X,av.Y.Scale,av.Y.Offset+ay.Y)end;_.InputBegan:Connect(function(ax)if ax.UserInputType==Enum.UserInputType.MouseButton1 or ax.UserInputType==Enum.UserInputType.Touch then au=ax.Position;av=_.Position;ax.Changed:Connect(function()if ax.UserInputState==Enum.UserInputState.End then at=nil end end)end end)_.InputChanged:Connect(function(ax)if ax.UserInputType==Enum.UserInputType.MouseMovement or ax.UserInputType==Enum.UserInputType.Touch then at=ax end end)as.InputChanged:Connect(function(ax)if ax==at and at then aw(ax)end end)
